# Bind to a UNIX socket
bind "unix://<%= fetch(:puma_socket) %>"
activate_control_app "unix://<%= fetch(:sockets_path) %>/pumactl.sock"

# not deamonizing here - still can use -d flag
# daemonize true
environment "<%= fetch(:rails_env) %>"
directory '<%= fetch(:current_path) %>'
pidfile "<%= fetch(:puma_pid) %>"
state_path "<%= fetch(:sockets_path) %>/puma.state"
stdout_redirect '<%= fetch(:puma_log) %>', '<%= fetch(:puma_error_log) %>', true

workers <%= fetch(:puma_workers) %>
prune_bundler

# 0-16 threads for production environment
# threads 0, 16